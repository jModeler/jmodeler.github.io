<!doctype html><html lang=en><head><title>Setting up Python to Run on Rmarkdown · The Journeyman Modeler
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Journeyman Modeler"><meta name=description content="I use the Hugo Coder template along with Rstudio’s Blogdown package to generate and deploy this website to github pages. I use this setup to generate blog posts (via Rmarkdown) that render \(\LaTeX\) math and output from R code.
Sometimes, I’d like to run Python code inside Rmarkdown too, and this is supported, via the reticulate package. That said, the following steps need to be followed to make sure everything runs smoothly (all of these steps worked on a macOS Ventura operating system)"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Setting up Python to Run on Rmarkdown"><meta name=twitter:description content="I use the Hugo Coder template along with Rstudio’s Blogdown package to generate and deploy this website to github pages. I use this setup to generate blog posts (via Rmarkdown) that render \(\LaTeX\) math and output from R code.
Sometimes, I’d like to run Python code inside Rmarkdown too, and this is supported, via the reticulate package. That said, the following steps need to be followed to make sure everything runs smoothly (all of these steps worked on a macOS Ventura operating system)"><meta property="og:url" content="http://jmodeler.github.io/posts/setting-up-python-to-run-on-rmarkdown/"><meta property="og:site_name" content="The Journeyman Modeler"><meta property="og:title" content="Setting up Python to Run on Rmarkdown"><meta property="og:description" content="I use the Hugo Coder template along with Rstudio’s Blogdown package to generate and deploy this website to github pages. I use this setup to generate blog posts (via Rmarkdown) that render \(\LaTeX\) math and output from R code.
Sometimes, I’d like to run Python code inside Rmarkdown too, and this is supported, via the reticulate package. That said, the following steps need to be followed to make sure everything runs smoothly (all of these steps worked on a macOS Ventura operating system)"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-21T00:00:00+00:00"><meta property="article:modified_time" content="2023-03-21T13:53:32-04:00"><meta property="article:tag" content="Python"><meta property="article:tag" content="Blogdown"><meta property="article:tag" content="Hugo"><link rel=canonical href=http://jmodeler.github.io/posts/setting-up-python-to-run-on-rmarkdown/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.38c4552ac40f9ae3408bad40358f654ebd8804412fe74ed56f2d6c8a7af82dd3.css integrity="sha256-OMRVKsQPmuNAi61ANY9lTr2IBEEv507Vby1sinr4LdM=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=http://jmodeler.github.io/>The Journeyman Modeler
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=http://jmodeler.github.io/posts/setting-up-python-to-run-on-rmarkdown/>Setting up Python to Run on Rmarkdown</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2023-03-21T00:00:00Z>March 21, 2023
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
3-minute read</span></div><div class=categories><i class="fa-solid fa-folder" aria-hidden=true></i>
<a href=/categories/productivity/>Productivity</a>
<span class=separator>•</span>
<a href=/categories/reference/>Reference</a></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/python/>Python</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/blogdown/>Blogdown</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/hugo/>Hugo</a></span></div></div></header><div class=post-content><p>I use the <a href=https://themes.gohugo.io/themes/hugo-coder/ class=external-link target=_blank rel=noopener>Hugo Coder template</a> along with Rstudio’s <a href=https://github.com/rstudio/blogdown class=external-link target=_blank rel=noopener>Blogdown</a> package to generate and deploy this website to <a href=https://pages.github.com/ class=external-link target=_blank rel=noopener>github pages</a>. I use this setup to generate blog posts (via <a href=https://rmarkdown.rstudio.com/ class=external-link target=_blank rel=noopener>Rmarkdown</a>) that render <code>\(\LaTeX\)</code> math and output from R code.</p><p>Sometimes, I’d like to run Python code inside Rmarkdown too, and this is <a href=https://bookdown.org/yihui/rmarkdown-cookbook/eng-python.html class=external-link target=_blank rel=noopener>supported</a>, via the <a href=https://cran.r-project.org/web/packages/reticulate/index.html class=external-link target=_blank rel=noopener>reticulate</a> package. That said, the following steps need to be followed to make sure everything runs smoothly (all of these steps worked on a macOS Ventura operating system)</p><ol><li>In your Rmarkdown file, always have this code chunk to setup Python use for later:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-r data-lang=r><span class=line><span class=cl><span class=c1># setup for using python code later in the page</span>
</span></span><span class=line><span class=cl><span class=c1># import the reticulate package</span>
</span></span><span class=line><span class=cl><span class=nf>library</span><span class=p>(</span><span class=n>reticulate</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># specify the version of python to use</span>
</span></span><span class=line><span class=cl><span class=nf>use_python</span><span class=p>(</span><span class=s>&#34;/Users/&lt;username&gt;/.pyenv/shims/python&#34;</span><span class=p>)</span>
</span></span></code></pre></div><ol start=2><li><p>Note: In the chunk above, replace <code>&lt;username></code> with your username. In addition, I use <code>pyenv</code> to manage python versions on my system, as <a href=https://blog.teclado.com/how-to-use-pyenv-manage-python-versions/ class=external-link target=_blank rel=noopener>explained here</a>. If you don’t have <code>pyenv</code> already, be sure to set it up using the instructions in the previous link.</p></li><li><p>You might hit an error when you run a python code chunk in Rmarkdown:</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>    Error: <span class=s1>&#39;/Users/&lt;username&gt;/.pyenv/shims/python&#39;</span> was not built with a shared library.
</span></span><span class=line><span class=cl>    reticulate can only <span class=nb>bind</span> to copies of Python built with <span class=s1>&#39;--enable-shared&#39;</span>.
</span></span><span class=line><span class=cl>    Execution halted
</span></span><span class=line><span class=cl>    Error : Failed to render content/post/&lt;name_of_post&gt;/index.en.Rmd
</span></span></code></pre></div><ol start=4><li><p>This just means I must build a version of python with the <code>--enable-shared</code> flag. I do this using <code>pyenv</code>.</p></li><li><p>First, choose a version of python that you want to use. You can do this by going to the terminal and typing</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>    pyenv install --list
</span></span></code></pre></div><ol start=6><li>This should show you a long output, some of them will be python versions, as shown below:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>    ...
</span></span><span class=line><span class=cl>    3.10.1
</span></span><span class=line><span class=cl>    3.10.2
</span></span><span class=line><span class=cl>    3.10.3
</span></span><span class=line><span class=cl>    3.10.4
</span></span><span class=line><span class=cl>    3.10.5
</span></span><span class=line><span class=cl>    3.10.6
</span></span><span class=line><span class=cl>    3.10.7
</span></span><span class=line><span class=cl>    3.10.8
</span></span><span class=line><span class=cl>    3.10.9
</span></span><span class=line><span class=cl>    3.10.10
</span></span><span class=line><span class=cl>    3.11.0
</span></span><span class=line><span class=cl>    ...
</span></span></code></pre></div><ol start=7><li>Choose an appropriate version and use the command below to install said version, like so (in the example below, I choose to install 3.11.0):</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>    env <span class=nv>PYTHON_CONFIGURE_OPTS</span><span class=o>=</span><span class=s2>&#34;--enable-shared&#34;</span> pyenv install 3.11.0
</span></span></code></pre></div><ol start=8><li>In the previous step, note the <code>--enable-shared</code> option has now been added</li><li>We now want to set this Python version to be the global Python version. Type the following command (replace 3.11.0 in the command below with the version you installed):</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>    pyenv global 3.11.0
</span></span></code></pre></div><ol start=10><li>You can also check if the global version set is the correct version using the following command:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>    pyenv versions
</span></span></code></pre></div><ol start=10><li><p>If you’re using python packages (i.e. <code>numpy</code>, <code>pandas</code>, etc.) in your code chunks, make sure to install them first (i.e. by using <code>pip3 install numpy</code>, <code>pip3 install pandas</code>, etc. in the terminal)</p></li><li><p>With all of this set up, you should no longer see the error above when you knit Rmarkdown documents with Python code chunks in them.</p></li></ol></div><footer></footer></article><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css integrity=sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0 crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js integrity=sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})'></script></section></div><footer class=footer><section class=container>©
2023 -
2025
Journeyman Modeler
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>